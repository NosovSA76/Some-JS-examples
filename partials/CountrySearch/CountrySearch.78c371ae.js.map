{"mappings":"qiBAMIA,E,0BACEC,EAAgBC,SAASC,cAAc,iBACvCC,EAAcF,SAASC,cAAc,iBACrCE,EAAYH,SAASC,cAAc,eAGzCF,EAAcK,MAAMC,QAAU,OAC9BH,EAAYE,MAAMC,QAAU,OAKWF,EAA7BG,iBAAiB,QAASC,EAAAC,EAAA,EACpC,SAAuBC,GACrB,IAAMC,EAAQP,EAAUO,MAAMC,OAC9B,IAAKD,EAGH,OASFX,EAAcK,MAAMC,QAAU,OAC9BH,EAAYE,MAAMC,QAAU,YAX1BO,IAIF,SAASA,IACTb,EAAcc,UAAY,GAC1BX,EAAYW,UAAY,E,EC7BKC,EDwCdJ,ECvCNK,MAAM,uCAA4CC,OAALF,EAAK,6CACpDG,MAAK,SAAAC,GACF,GAAwB,MAApBA,EAASC,OACT,MAAM,IAAIC,MAAMF,EAASC,QAE7B,OAAOD,EAASG,M,KDmCvBJ,MAAK,SAAAK,GACJxB,EAAcwB,EACVA,EAAKC,OAAS,KAChBxB,EAAcK,MAAMC,QAAU,OAC9BH,EAAYE,MAAMC,QAAU,OAC5BmB,EAAAC,OAAOC,KACL,+DAeV,SAAyBC,GACD,IAAlBA,EAAOJ,SACTxB,EAAcc,UAAY,GAC1Bd,EAAcK,MAAMC,QAAU,OAC9BH,EAAYE,MAAMC,QAAU,QAC5BH,EAAYW,UAAYe,EAA0BD,IAEhDA,EAAOJ,QAAU,GAAKI,EAAOJ,QAAU,KACzCrB,EAAYW,UAAY,GACxBX,EAAYE,MAAMC,QAAU,OAC5BN,EAAcK,MAAMC,QAAU,QAC9BN,EAAcc,UAAYgB,EAA0BF,GA4C/B3B,SAAS8B,iBAAiB,mBAClCC,SAAQ,SAACC,EAAeC,GACrCD,EAAc1B,iBAAiB,SAAS,WACtC,IAAM4B,EAAaF,EAAcG,YAAYxB,OAC7CR,EAAUO,MAAQwB,EAClB,IAAME,EAActC,EAAYmC,GAC1BI,EAAoBT,EAA0B,CAACQ,IACrDlC,EAAYW,UAAYwB,EACxBtC,EAAcK,MAAMC,QAAU,OAC9BH,EAAYE,MAAMC,QAAU,O,QA3E5BiC,CAAgBhB,E,IAEjBiB,OAAM,SAAAC,GACL5B,IACAY,EAAAC,OAAOgB,QAAQ,2C,ICvDS,IAAC3B,C,GDKR,MAyEvB,IAAMc,EAA4B,SAAAN,GAChC,IAAIoB,EAAQ,EACZ,OAAOpB,EAAKqB,QACV,SAACC,EAAIC,G,IAAIC,EAAYD,EAAZE,MAASD,IAAOhC,EAAI+B,EAAJ/B,KAAMkC,EAAOH,EAAPG,QAASC,EAAUJ,EAAVI,WAAYC,EAASL,EAATK,UAGlD,OAFAR,IACAQ,EAAYC,OAAOC,OAAOF,GAAWG,KAAK,MAExCT,EACA,6CAGc5B,OAFF,IAAV0B,EAAc,QAAU,OACzB,6BAC0B1B,OAAb8B,EAAI,WACX9B,OADoBF,EAAK,+CAEVE,OADfF,EAAKwC,SAAS,sCAEItC,OADHgC,EAAQ,gDAENhC,OADCiC,EAAW,+CACFjC,OAAVkC,EAAU,8B,GAItC,G,EAIErB,EAA4B,SAAAP,G,OAChCA,EAAKqB,QAAO,SAACC,EAAIC,G,QAAI/B,KAAQwC,EAAQC,EAARD,SAAUE,EAAMD,EAANC,OAAUV,EAAYD,EAAZE,MAASD,IAExD,OADAW,QAAQC,IAAId,GAEVA,EACA,wFAEiD5B,OAAb8B,EAAI,WAC9B9B,OADuCwC,EAAO,iCACrCxC,OAATsC,EAAS,0C,GAIpB,G","sources":["src/js/CountrySearch/index.js","src/js/CountrySearch/fetchCountries.js"],"sourcesContent":["import '../../sass/CountrySearch/CountySearch.scss';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport debounce from 'lodash.debounce';\nimport { fetchCountries } from './fetchCountries';\n\nconst DEBOUNCE_DELAY = 300;\nlet coumtryList\nconst countriesList = document.querySelector('.country-list');\nconst countryInfo = document.querySelector('.country-info');\nconst searchBox = document.querySelector('#search-box');\n\n\ncountriesList.style.display = 'none';\ncountryInfo.style.display = 'none';\n\n// Записуємо дані введені корсистувачем у змінну value з затримкою в 0,3 сек, при очищені вікна пошуку\n// скриваємо інформацію з попереднього запросу\n\nsearchBox.addEventListener('input', debounce(onInputSearch, DEBOUNCE_DELAY));\nfunction onInputSearch(e) {\n  const value = searchBox.value.trim();\n  if (!value) {\n    addHidden();\n    clearInterfaceUI();\n    return;\n  }\n\n  function clearInterfaceUI() {\n  countriesList.innerHTML = '';\n  countryInfo.innerHTML = '';\n}\n\nfunction addHidden() {\n  countriesList.style.display = 'none';\n  countryInfo.style.display = 'none';\n}\n\n  // використовуємо дані які вносить користувач для створення запросу на API сервер у разі якщо отриманий массив більше 10\n  // обєктів виводимо повідомлення з проханням уточнити запрос, якщо отримуємо пустий масив виводимо повідомленні щодо хибного пошуку\n\n  fetchCountries(value)\n    .then(data => {\n      coumtryList = data\n      if (data.length > 10) {\n        countriesList.style.display = 'none';\n        countryInfo.style.display = 'none';\n        Notify.info(\n          'Too many matches found. Please enter a more specific name.'\n\n        );\n      }\n      renderCountries(data);\n    })\n    .catch(err => {\n      clearInterfaceUI();\n      Notify.failure('Oops, there is no country with that name');\n    });\n}\n\n// Якщо в результаті запросу отриман лише 1 один обєкт виводимо інформацію щощдо країни, якщо декілько створюємо перелік\n// зі скороченою інформацією(прапор, назва) у виді кнопок доступних для натискання для уточнення запросу\n\nfunction renderCountries(result) {\n  if (result.length === 1) {\n    countriesList.innerHTML = '';\n    countriesList.style.display = 'none';\n    countryInfo.style.display = 'block';\n    countryInfo.innerHTML = generateMarkupCountryInfo(result);\n  }\n  if (result.length >= 2 && result.length <= 10) {\n    countryInfo.innerHTML = '';\n    countryInfo.style.display = 'none';\n    countriesList.style.display = 'block';\n    countriesList.innerHTML = generateMarkupCountryList(result);\n    countryButton()\n  }\n}\n\nconst generateMarkupCountryInfo = data => {\n  let count = 0;\n  return data.reduce(\n    (same, { flags: { svg }, name, capital, population, languages }) => {\n      count++;\n      languages = Object.values(languages).join(', ');\n      return (\n        same +\n        `<div class=\"country-card\" style=\"display: ${\n          count === 1 ? \"block\" : \"none\"\n        };\">\n          <img src=\"${svg}\" alt=\"${name}\" width=\"320\" height=\"auto\">\n          <p>${name.official}</p>\n          <p>Capital: <span>${capital}</span></p>\n          <p>Population: <span>${population}</span></p>\n          <p>Languages: <span>${languages}</span></p>\n        </div>`\n      );\n    },\n    \"\"\n  );\n};\n\nconst generateMarkupCountryList = data =>\n  data.reduce((same, { name: { official, common }, flags: { svg } }) => {\n    console.log(same)\n    return (\n      same +\n      `<li>\n      <button class=\"country-button\">\n        <img class=\"countrys-flag\" src=\"${svg}\" alt=\"${common}\" width=\"70\">\n        <span>${official}</span>\n        </button>\n      </li>`\n    );\n  }, '');\n\n\nfunction countryButton() {\n  const countryButtons = document.querySelectorAll('.country-button');\n  countryButtons.forEach((countryButton, index) => {\n    countryButton.addEventListener('click', () => {\n      const buttonText = countryButton.textContent.trim();\n      searchBox.value = buttonText;\n      const countryData = coumtryList[index];\n      const countryInfoMarkup = generateMarkupCountryInfo([countryData]);\n      countryInfo.innerHTML = countryInfoMarkup;\n      countriesList.style.display = 'none';\n      countryInfo.style.display = 'block';\n    });\n  });\n}","export const fetchCountries = (name) => {\n    return fetch(`https://restcountries.com/v3.1/name/${name}?name,capital,population,flags,languages`)\n        .then(response => {\n            if (response.status === 404) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        });\n};\n\n"],"names":["$3d04aed05f774111$var$coumtryList","$3d04aed05f774111$var$countriesList","document","querySelector","$3d04aed05f774111$var$countryInfo","$3d04aed05f774111$var$searchBox","style","display","addEventListener","$parcel$interopDefault","$l1Gdk","e","value","trim","clearInterfaceUI","innerHTML","name","fetch","concat","then","response","status","Error","json","data","length","$h6c0i","Notify","info","result","$3d04aed05f774111$var$generateMarkupCountryInfo","$3d04aed05f774111$var$generateMarkupCountryList","querySelectorAll","forEach","countryButton1","index","buttonText","textContent","countryData","countryInfoMarkup","$3d04aed05f774111$var$renderCountries","catch","err","failure","count","reduce","same","param","svg","flags","capital","population","languages","Object","values","join","official","_name","common","console","log"],"version":3,"file":"CountrySearch.78c371ae.js.map"}